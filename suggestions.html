<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>StyleAura â€“ Outfit Suggestions</title>
  <link rel="stylesheet" href="suggestions.css" />
</head>
<body>
  <header>
    <h1>âœ¨ Your Outfit Suggestion âœ¨</h1>
    <p class="tagline">Based on your wardrobe and vibe</p>
  </header>

  <div class="filters">
    <label for="occasion">Occasion:</label>
    <select id="occasion">
      <option value="">Any</option>
      <option value="casual">Casual</option>
      <option value="formal">Formal</option>
      <option value="party">Party</option>
      <option value="ethnic">Ethnic</option>
    </select>

    <label for="season">Season:</label>
    <select id="season">
      <option value="">All</option>
      <option value="summer">Summer</option>
      <option value="winter">Winter</option>
      <option value="monsoon">Monsoon</option>
    </select>
  </div>

  <main class="suggestion-box">
    <div id="outfitContainer">
      <p>Click below to generate your look!</p>
    </div>
    <div class="btns">
      <button class="btn" onclick="generateOutfit()">âœ¨ Generate New Outfit</button>
      <button class="btn save" onclick="saveLook()">ðŸ’¾ Save Look</button>
    </div>
  </main>

  <div class="saved-looks">
    <h3>ðŸ’¡ Saved Looks</h3>
    <div id="savedLooksContainer"></div>
  </div>

  <div class="smart-suggestions">
    <h3>ðŸ§  Smart Suggestions</h3>
    <ul id="suggestionList"></ul>
  </div>

  <script>
    function generateOutfit() {
      const wardrobe = JSON.parse(localStorage.getItem("wardrobe")) || [];
      const container = document.getElementById("outfitContainer");
      const suggestionList = document.getElementById("suggestionList");

      if (wardrobe.length === 0) {
        container.innerHTML = "<p>No wardrobe items available.</p>";
        return;
      }

      const occasion = document.getElementById("occasion").value;
      const season = document.getElementById("season").value;

      const categories = {
        top: [],
        bottom: [],
        dress: [],
        footwear: [],
        accessory: [],
        outerwear: []
      };

      wardrobe.forEach(item => {
        if (!item.category || !item.image) return;
        const cat = item.category.toLowerCase();
        if (categories[cat]) {
          if (
            (!item.occasion || item.occasion === occasion || occasion === "") &&
            (!item.season || item.season === season || season === "")
          ) {
            categories[cat].push(item);
          }
        }
      });

      const selectedItems = {};
      for (const cat in categories) {
        const items = categories[cat];
        if (items.length > 0) {
          selectedItems[cat] = items[Math.floor(Math.random() * items.length)];
        }
      }

      container.innerHTML = "";
      if (Object.keys(selectedItems).length === 0) {
        container.innerHTML = "<p>No wardrobe items available for selected filters.</p>";
        return;
      }

      for (let key in selectedItems) {
        const item = selectedItems[key];
        const section = document.createElement("div");
        section.className = "outfit-item";

        const label = document.createElement("h3");
        label.textContent = key.charAt(0).toUpperCase() + key.slice(1);

        const img = document.createElement("img");
        img.src = item.image;
        img.alt = key;

        const deleteBtn = document.createElement("button");
        deleteBtn.textContent = "âŒ";
        deleteBtn.className = "btn";
        deleteBtn.onclick = () => deleteItem(item.image);

        section.appendChild(label);
        section.appendChild(img);
        section.appendChild(deleteBtn);
        container.appendChild(section);
      }

      generateSmartSuggestions(wardrobe);
    }

    function deleteItem(imageSrc) {
      let wardrobe = JSON.parse(localStorage.getItem("wardrobe")) || [];
      wardrobe = wardrobe.filter(item => item.image !== imageSrc);
      localStorage.setItem("wardrobe", JSON.stringify(wardrobe));
      generateOutfit();
    }

    function saveLook() {
      const container = document.getElementById("outfitContainer");
      const hasImage = container.querySelector("img");
      if (!hasImage) return alert("Generate an outfit first!");

      const savedContainer = document.getElementById("savedLooksContainer");
      const savedLook = document.createElement("div");
      savedLook.className = "saved-look";
      savedLook.innerHTML = container.innerHTML;
      savedContainer.appendChild(savedLook);
    }

    function generateSmartSuggestions(wardrobe) {
      const list = document.getElementById("suggestionList");
      list.innerHTML = "";

      const tops = wardrobe.filter(item => item.category?.toLowerCase() === "top");
      const bottoms = wardrobe.filter(item => item.category?.toLowerCase() === "bottom");
      const accessories = wardrobe.filter(item => item.category?.toLowerCase() === "accessory");

      const suggestions = [];

      if (tops.length === 0) suggestions.push("Consider adding a few stylish tops.");
      if (bottoms.length < 2) suggestions.push("Add more bottoms for variety.");
      if (accessories.length === 0) suggestions.push("Accessories complete your lookâ€”add some!");
      if (wardrobe.length > 20) suggestions.push("Declutter items you rarely wear.");

      if (suggestions.length === 0) {
        suggestions.push("Your wardrobe looks well-balanced! âœ¨");
      }

      suggestions.forEach(s => {
        const li = document.createElement("li");
        li.textContent = s;
        list.appendChild(li);
      });
    }
  </script>
</body>
</html>
