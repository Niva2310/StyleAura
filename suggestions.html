<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>StyleAura – Outfit Suggestions</title>
  <link rel="stylesheet" href="suggestions.css" />
</head>
<body>
  <header>
    <h1>✨ Your Outfit Suggestion ✨</h1>
    <p class="tagline">Based on your wardrobe and vibe</p>
  </header>

  <div class="filters">
    <label for="occasion">Occasion:</label>
    <select id="occasion">
      <option value="">Any</option>
      <option value="casual">Casual</option>
      <option value="formal">Formal</option>
      <option value="party">Party</option>
      <option value="ethnic">Ethnic</option>
    </select>

    <label for="season">Season:</label>
    <select id="season">
      <option value="">All</option>
      <option value="summer">Summer</option>
      <option value="winter">Winter</option>
      <option value="monsoon">Monsoon</option>
    </select>
  </div>

  <main class="suggestion-box">
    <div id="outfitContainer">
      <p>Click below to generate your look!</p>
    </div>
    <div class="btns">
      <button class="btn" onclick="generateOutfit()">✨ Generate New Outfit</button>
      <button class="btn save" onclick="saveLook()">💾 Save Look</button>
    </div>
  </main>

  <div class="saved-looks">
    <h3>💡 Saved Looks</h3>
    <div id="savedLooksContainer"></div>
  </div>

  <script>
    function generateOutfit() {
      const wardrobe = JSON.parse(localStorage.getItem("wardrobe")) || [];
      if (wardrobe.length === 0) {
        document.getElementById("outfitContainer").innerHTML = "<p>No wardrobe items available.</p>";
        return;
      }

      const occasion = document.getElementById("occasion").value;
      const season = document.getElementById("season").value;

      const categories = {
        Top: [],
        Bottom: [],
        Footwear: [],
        Accessory: [],
        Outerwear: []
      };

      wardrobe.forEach(item => {
        // Optional: Add filtering by occasion/season later if your wardrobe items store that
        if (categories[item.category]) {
          categories[item.category].push(item);
        }
      });

      const outfit = {};
      for (let category in categories) {
        const items = categories[category];
        if (items.length > 0) {
          const randomItem = items[Math.floor(Math.random() * items.length)];
          outfit[category] = randomItem;
        }
      }

      const container = document.getElementById("outfitContainer");
      container.innerHTML = "";

      if (Object.keys(outfit).length === 0) {
        container.innerHTML = "<p>No wardrobe items available for selected filters.</p>";
        return;
      }

      for (let key in outfit) {
        const item = outfit[key];
        const section = document.createElement("div");
        section.className = "outfit-item";

        const label = document.createElement("h3");
        label.textContent = key;

        const img = document.createElement("img");
        img.src = item.image;
        img.alt = key;

        const deleteBtn = document.createElement("button");
        deleteBtn.textContent = "❌";
        deleteBtn.className = "btn";
        deleteBtn.onclick = () => deleteItem(item.image);

        section.appendChild(label);
        section.appendChild(img);
        section.appendChild(deleteBtn);
        container.appendChild(section);
      }
    }

    function deleteItem(imageSrc) {
      let wardrobe = JSON.parse(localStorage.getItem("wardrobe")) || [];
      wardrobe = wardrobe.filter(item => item.image !== imageSrc);
      localStorage.setItem("wardrobe", JSON.stringify(wardrobe));
      generateOutfit();
    }

    function saveLook() {
      const currentOutfit = document.getElementById("outfitContainer").innerHTML;
      if (!currentOutfit.includes("img")) return alert("Generate an outfit first!");

      const container = document.getElementById("savedLooksContainer");
      const savedLook = document.createElement("div");
      savedLook.className = "saved-look";
      savedLook.innerHTML = currentOutfit;
      container.appendChild(savedLook);
    }
  </script>
</body>
</html>


